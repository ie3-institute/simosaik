plugins {
    id 'java' // java support
    id 'groovy' // groovy support
    id 'maven-publish' // publish to a maven repo (local or mvn central, has to be defined)
}

ext {
    //version (changing these should be considered thoroughly!)
    javaVersion = JavaVersion.VERSION_17
    scriptsLocation = 'gradle' + File.separator + 'scripts' + File.separator // location of script plugins

    scalaVersion = '2.13'
    scalaBinaryVersion = '2.13.12'
    pekkoVersion = '1.0.1'

}

group = 'com.github.ie3-institute'
description = 'simosaik'

java {
    sourceCompatibility = javaVersion
    targetCompatibility = javaVersion
}

/*
apply from: scriptsLocation + 'spotless.gradle'
apply from: scriptsLocation + 'pmd.gradle'
apply from: scriptsLocation + 'spotbugs.gradle'
apply from: scriptsLocation + 'sonarqube.gradle'
apply from: scriptsLocation + 'checkJavaVersion.gradle'
apply from: scriptsLocation + 'semVer.gradle'
apply from: scriptsLocation + 'mavenCentralPublish.gradle'
apply from: scriptsLocation + 'jacoco.gradle'
apply from: scriptsLocation + 'documentation.gradle'
apply from: scriptsLocation + 'test.gradle'

 */

repositories {
    mavenCentral() // searches in Sonatype's central repository
    //maven { url 'https://s01.oss.sonatype.org/content/repositories/snapshots' } // sonatype snapshot repo
    //maven { url 'https://packages.confluent.io/maven' } // confluent repo (kafka)
}

dependencies {
    /*
    constraints {
        implementation( 'com.fasterxml.jackson.core:jackson-databind:2.16.0+' ){
            because "[CVE-2020-25649] CWE-611: Improper Restriction of XML External Entity Reference ('XXE')"
        }
    }

     */
    implementation 'tech.units:indriya:2.2' // quantities

    /* Mosaik dependencies */
    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.9.3'
    implementation 'com.googlecode.json-simple:json-simple:1.1.1'

    // ieÂ³ internal repository
    implementation('com.github.ie3-institute:PowerSystemUtils:2.0') {
        exclude group: 'org.apache.logging.log4j'
        exclude group: 'org.slf4j'
        /* Exclude our own nested dependencies */
        exclude group: 'com.github.ie3-institute'
    }
    implementation('com.github.ie3-institute:PowerSystemDataModel:4.1.0') {
        exclude group: 'org.apache.logging.log4j'
        exclude group: 'org.slf4j'
        /* Exclude our own nested dependencies */
        exclude group: 'com.github.ie3-institute'
    }
    implementation('com.github.ie3-institute:simonaAPI:0.4.0') {
        exclude group: 'org.apache.logging.log4j'
        exclude group: 'org.slf4j'
        /* Exclude our own nested dependencies */
        exclude group: 'edu.ie3'
    }


    implementation files('C:/Users/Johannes/Documents/ie3/IDEA/simonaAPI_dev/simosaik/libs/mosaik-api-java-3.0.jar')

    // pekko
    implementation "org.apache.pekko:pekko-actor_${scalaVersion}:${pekkoVersion}"
    testImplementation "org.apache.pekko:pekko-testkit_${scalaVersion}:${pekkoVersion}" // pekko testkit

    // TESTING
    testImplementation 'org.spockframework:spock-core:2.3-groovy-4.0'

    /* logging */
    implementation "com.typesafe.scala-logging:scala-logging_${scalaVersion}:3.9.5" // pekko scala logging
    implementation "ch.qos.logback:logback-classic:1.4.14"

    /* --- Scala libs --- */
    /* CORE Scala */
    implementation "org.scala-lang:scala-library:${scalaBinaryVersion}"
}